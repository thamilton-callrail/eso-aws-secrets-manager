
# Test existence of SecretStore and ExternalSecret
apiVersion: v1
kind: Pod
metadata:
  name: "eso-aws-secrets-manager-test-connection"
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: kubectl
      image: bitnami/kubectl:latest
      command:
        - /bin/sh
        - -c
        - |
          kubectl get secretstore {{ .Values.secretStore.name }} -n {{ .Values.secretStore.namespace }} && \
          kubectl get externalsecret {{ .Values.externalSecret.name }} -n {{ .Values.externalSecret.namespace }}
  restartPolicy: Never
